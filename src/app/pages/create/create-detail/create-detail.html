<div class="create-page">

  <app-create-header
    [card]="card"
    (back)="goBack()">
  </app-create-header>

  <div class="create-detail-wrapper">
    @switch (createState) {
      @case ('idle') {
        <app-create-idle
          [card]="card"
          [initialPrompt]="prompt"
          [initialImageUrl]="initialImageUrl"
          (create)="onCreate($event)">
        </app-create-idle>
      }
      @case ('loading') {
        <div class="loading-screen">
          <div class="spinner"></div>
          <p>Создаём…</p>
        </div>
      }
      @case ('result') {
        <app-create-result
          [resultImageUrl]="resultImageUrl"
          [prompt]="prompt"
          (edit)="onEditResult()"
          (createAnother)="onCreateAnother()">
        </app-create-result>
      }
    }
  </div>

  <app-generation-history
    [history]="generationHistory"
    (repeat)="repeatGeneration($event)">
  </app-generation-history>
</div>
